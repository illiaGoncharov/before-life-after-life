"use strict";(self.webpackChunkbefore_life_after_life=self.webpackChunkbefore_life_after_life||[]).push([[42],{42:(e,r,t)=>{t.r(r),t.d(r,{default:()=>s});var n=t(43),o=t(354),a=t(579);const i={"before life":1,home:2,"family at home":3,birth:4,"unintended child":5,puberty:6,"bullied teen":7,love:8,"love between men":9,"love between women":10,sex:11,"unsafe sex":12,"healthy person":13,"sick person":14,"person with mental health condition":15,"person with substance use disorder":16,immigrant:17,"apolitical person":18,propaganda:19,"people at protest":20,"rich politician":21,"poor politician":22,"poor person":23,"homeless person":24,"unemployed person":25,influencer:26,artist:27,"office worker":28,city:29,"city celebration":30,"city at war":31,"person at war":32,"woman at war":33,"women military parade":34,"tampon in blood":35,"bullet in blood":36,"elderly person":37,"dying person":38,euthanasia:39,"dying pet":40,death:41,funeral:42,cemetery:43,religion:44,afterlife:45};const s=function(){const[e,r]=(0,n.useState)(window.innerHeight),[t,s]=(0,n.useState)(null),[c,l]=(0,n.useState)(!1),[u,d]=(0,n.useState)(!1),[m,f]=(0,n.useState)(!1),[p,h]=(0,n.useState)(!0),[y,b]=(0,n.useState)(!1),g=(0,n.useRef)(null),v=(0,n.useRef)(null),w=(0,n.useRef)(null),x=(0,n.useRef)(null),E=(0,n.useRef)(0);(0,n.useEffect)((()=>{const e=setTimeout((()=>{h(!1),f(!0)}),2e3);return()=>clearTimeout(e)}),[]),(0,n.useEffect)((()=>{try{navigator.mediaDevices.getUserMedia({video:!0}).then((e=>{v.current&&(v.current.srcObject=e)})).catch((e=>{console.error("Camera error:",e),l(!0)}))}catch(e){console.error("Camera initialization error:",e),l(!0)}}),[]),(0,n.useEffect)((()=>{try{g.current=new Audio;const e=()=>{d(!1)};g.current.addEventListener("ended",e);const r=e=>{console.error("Audio error:",e),E.current+=1,E.current>=3&&(console.warn("Too many audio errors, disabling audio"),b(!0)),d(!1)};return g.current.addEventListener("error",r),()=>{g.current&&(g.current.pause(),g.current.removeEventListener("ended",e),g.current.removeEventListener("error",r))}}catch(e){return console.error("Audio initialization error:",e),b(!0),()=>{}}}),[]),(0,n.useEffect)((()=>{if(!m)return;const e=()=>{try{r((e=>e-.3)),y||(()=>{if(!u&&!y)try{const e=window.innerHeight/2,r=document.querySelectorAll(".text-step");if(!r||!r.length)return;let n=null,o=1/0;if(r.forEach((r=>{try{const t=r.getBoundingClientRect(),a=t.top+t.height/2,i=Math.abs(a-e);i<o&&(o=i,n=r)}catch(t){}})),n&&o<50){const e=n.textContent;if(e&&e!==t&&(s(e),!y)){const r=i[e];r&&A(r)}}}catch(e){console.error("Error in checkCenterPrompt:",e)}})(),w.current=requestAnimationFrame(e)}catch(n){console.error("Animation error:",n),w.current=requestAnimationFrame(e)}};return w.current=requestAnimationFrame(e),()=>{w.current&&cancelAnimationFrame(w.current)}}),[t,u,m,y]);const A=e=>{if(g.current&&!y)try{d(!0);const r=`/before-life-after-life/audio/audio_${String(e).padStart(2,"0")}.mp3`;g.current.paused||g.current.pause(),g.current.src=r;const t=setTimeout((()=>{d(!1)}),1e4);g.current.play().then((()=>{clearTimeout(t)})).catch((e=>{console.error("Audio playback error:",e),clearTimeout(t),d(!1),E.current+=1,E.current>=3&&(console.warn("Too many audio errors, disabling audio"),b(!0))}))}catch(r){console.error("Error playing audio:",r),d(!1)}};return p?(0,a.jsx)("div",{className:"text-container loading",children:(0,a.jsx)("div",{className:"loading-message",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})}):(0,a.jsxs)("div",{className:"text-container",children:[c&&(0,a.jsx)("div",{className:"camera-error",children:(0,a.jsx)("span",{children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u043a\u0430\u043c\u0435\u0440\u0435"})}),(0,a.jsx)("video",{ref:v,autoPlay:!0,playsInline:!0,muted:!0,className:"video-bg"}),(0,a.jsx)("div",{ref:x,className:"text-wrapper",style:{transform:`translateY(${-e}px)`},children:o.E.map(((e,r)=>(0,a.jsx)("div",{className:"text-step",children:e},r)))})]})}}}]);
//# sourceMappingURL=42.029267a8.chunk.js.map